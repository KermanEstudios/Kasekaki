-- Configura la variable global para controlar el bucle principal
getgenv().loopgoto = true;

-- Espera a que el personaje del jugador esté disponible
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

-- Función para teletransportar al jugador a un jugador aleatorio
local function teleportToRandomPlayer()
    -- Obtén la lista de jugadores en el juego
    local players = game:GetService("Players"):GetPlayers()

    -- Filtra la lista para excluir al jugador actual y jugadores sin personajes
    local validPlayers = {}
    for _, p in ipairs(players) do
        if p ~= player and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
            table.insert(validPlayers, p)
        end
    end

    -- Verifica si hay jugadores válidos para teletransportar
    if #validPlayers > 0 then
        -- Elige un jugador aleatorio
        local targetPlayer = validPlayers[math.random(1, #validPlayers)]
        local targetPosition = targetPlayer.Character.HumanoidRootPart.Position
        -- Teletransporta al jugador al objetivo con un pequeño desplazamiento
        humanoidRootPart.CFrame = CFrame.new(targetPosition) * CFrame.new(0, 0, 3)
    end
end

-- Ejecuta el bucle principal para teletransportar al jugador a un jugador aleatorio
while getgenv().loopgoto do
    task.wait(2)  -- Espera 2 segundos entre teletransportes
    spawn(teleportToRandomPlayer)  -- Llama a la función de teletransporte en paralelo
end
